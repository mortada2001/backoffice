<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Map Navigator Pro</title>
<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<!-- Leaflet MarkerCluster CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
 
  <style>
    /* General Styles */
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: #333;
      overflow-x: hidden; /* لمنع التمرير الأفقي */
    }
 
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
    }
 
    header {
      margin-bottom: 30px;
    }
 
    header h1 {
      font-size: 2.5rem;
      color: #2c3e50;
    }
 
    header p {
      font-size: 1.1rem;
      color: #7f8c8d;
    }
 
    /* Input Section */
    .input-section {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
 
    .input-section input {
      padding: 10px;
      font-size: 1rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      width: 300px;
    }
 
    .input-section button {
      padding: 10px 20px;
      font-size: 1rem;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
 
    .input-section button:hover {
      background-color: #2980b9;
    }
 
    /* Map Box */
    #map {
      height: 600px;
      width: 100%;
      border-radius: 70px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin: 20px auto;
    }
 
    .zone-label, .pole-label {
      font-size: 14px;
      font-weight: bold;
      color: black;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 2px 5px;
      border-radius: 3px;
    }
 
    /* تحسين عناصر التحكم في الخريطة */
    .leaflet-control-zoom {
      margin-right: 15px;
      margin-bottom: 15px;
    }
</style>
</head>
<body>
<div class="container">
<header>
<h1>Map Navigator Pro</h1>
<p>⚠️يوجد الان صيانة عل الموقع نعتذر لازعجكم⚠️</p>
</header>
 
    <div class="input-section">
<input type="text" id="coordinates" placeholder="Enter coordinates (e.g., 33.2625977,44.4070566)" />
<button id="navigate-btn">Navigate</button>
</div>
 
    <div id="map"></div>
</div>
 
  <!-- Leaflet JavaScript -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<!-- MarkerCluster JavaScript -->
<script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
      // تهيئة الخريطة مع إعدادات التكبير المتقدمة
      const map = L.map('map', {
        zoomControl: true,
        maxZoom: 22,    // زيادة مستوى التكبير الأقصى
        minZoom: 3,     // مستوى التصغير الأدنى
        inertia: true,   // تمكين القصور الذاتي للحركة
        inertiaDeceleration: 3000,
        wheelPxPerZoomLevel: 100
      }).setView([33.2625977, 44.4070566], 20);
 
      // إضافة طبقة الخريطة مع دعم التكبير العالي
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors',
        maxZoom: 22,    // يجب أن يتطابق مع إعدادات الخريطة
        detectRetina: true // لدعم الشاشات عالية الدقة
      }).addTo(map);
 
      // بديل لخرائط جوجل (إذا لزم الأمر)
      /*
      L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
        maxZoom: 22,
        attribution: 'Google Satellite'
      }).addTo(map);
      */
 
      // تحميل طبقة المناطق
      fetch('zones.geojson')
        .then(response => response.json())
        .then(data => {
          L.geoJSON(data, {
            style: {
              color: '#ff7800',
              weight: 2,
              opacity: 1
            },
            onEachFeature: function (feature, layer) {
              if (feature.properties?.Zone_ID) {
                const center = layer.getBounds().getCenter();
                L.marker(center, {
                  icon: L.divIcon({
                    className: 'zone-label',
                    html: feature.properties.Zone_ID,
                    iconSize: [50, 20],
                    iconAnchor: [25, 10]
                  })
                }).addTo(map);
              }
            }
          }).addTo(map);
        })
        .catch(console.error);
 
      // تهيئة تجميع العلامات
      const markers = L.markerClusterGroup({
        spiderfyOnMaxZoom: true, // تمكين التوزيع عند التكبير الأقصى
        showCoverageOnHover: false,
        zoomToBoundsOnClick: true,
        maxClusterRadius: 40
      });
 
      // دالة لتحميل الأعمدة
      const loadPoles = (geojsonPath) => {
        fetch(geojsonPath)
          .then(response => response.json())
          .then(data => {
            L.geoJSON(data, {
              pointToLayer: (feature, latlng) => {
                return L.marker(latlng, {
                  icon: L.divIcon({
                    className: 'pole-label',
                    html: feature.properties.Pole_No || 'N/A',
                    iconSize: [60, 20],
                    iconAnchor: [30, 10]
                  })
                }).bindPopup(`Pole No: ${feature.properties.Pole_No || 'N/A'}`);
              }
            }).getLayers().forEach(layer => markers.addLayer(layer));
          })
          .catch(console.error);
      };
 
      // تحميل بيانات الأعمدة
      loadPoles('pole.geojson');
      loadPoles('polesA.geojson');
      map.addLayer(markers);
 
      // التحكم في التنقل
      document.getElementById('navigate-btn').addEventListener('click', () => {
        const input = document.getElementById('coordinates').value.trim();
        const coords = input.split(/[\s,]+/).map(Number);
 
        if (coords.length !== 2 || coords.some(isNaN)) {
          alert('Invalid coordinates! Format: latitude,longitude');
          return;
        }
 
        map.flyTo(coords, 22, {
          animate: true,
          duration: 2,
          easeLinearity: 0.25
        });
 
        L.marker(coords)
          .addTo(map)
          .bindPopup('Target Location<br>Lat: ' + coords[0] + '<br>Lon: ' + coords[1])
          .openPopup();
      });
 
      // إضافة تحكم مخصص في التكبير
      L.control.zoom({
        position: 'topright',
        zoomInText: '+',
        zoomOutText: '-',
        zoomInTitle: 'Zoom In',
        zoomOutTitle: 'Zoom Out'
      }).addTo(map);
    });
</script>
</body>
</html>
